(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{303:function(s,a,t){"use strict";t.r(a);var n=t(10),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"一、单机环境搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、单机环境搭建"}},[s._v("#")]),s._v(" 一、单机环境搭建")]),s._v(" "),a("h2",{attrs:{id:"_1、准备工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、准备工作"}},[s._v("#")]),s._v(" 1、准备工作")]),s._v(" "),a("p",[s._v("Cent OS取消打开文件数限制：在 "),a("code",[s._v("limits.conf")]),s._v(" 文件的末尾加入以下内容")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("laowang@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/security/limits.conf\n* soft nofile "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\n* hard nofile "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\n* soft nproc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("131072")]),s._v("\n* hard nproc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("131072")]),s._v("\n")])])]),a("p",[s._v("Cent OS取消打开文件数限制：在 "),a("code",[s._v("20-nproc.conf")]),s._v(" 文件的末尾加入以下内容")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("laowang@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/security/limits.d/20-nproc.conf\n* soft nofile "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\n* hard nofile "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\n* soft nproc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("131072")]),s._v("\n* hard nproc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("131072")]),s._v("\n")])])]),a("p",[s._v("安装依赖")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("laowang@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y libtool\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("laowang@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y *unixODBC*\t\n")])])]),a("p",[s._v("Cent OS取消SELINUX")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("laowang@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/selinux/config\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SELINUX")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("disabled\n")])])]),a("p",[s._v("配置另外两台服务器：将 "),a("code",[s._v("hadoop102")]),s._v(" 配置分发")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("laowang@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" xsync /etc/security/limits.conf\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("laowang@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" xsync /etc/security/limits.d/20-nproc.conf\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("atguigu@hadoop102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" xsync /etc/selinux/config\n")])])]),a("p",[s._v("配置另外两台服务器：在 "),a("code",[s._v("hadoop103")]),s._v("、 "),a("code",[s._v("hadoop104")]),s._v(" 上安装依赖")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("laowang@hadoop103 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y libtool\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("laowang@hadoop103 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y *unixODBC*\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("laowang@hadoop104 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y libtool\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("laowang@hadoop104 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y *unixODBC*\n")])])]),a("h2",{attrs:{id:"_2、正式安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、正式安装"}},[s._v("#")]),s._v(" 2、正式安装")]),s._v(" "),a("p",[s._v("在 "),a("code",[s._v("hadoop102")]),s._v(" 的 "),a("code",[s._v("/opt/software")]),s._v(" 目录下创建 "),a("code",[s._v("clickhouse")]),s._v(" 目录")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("laowang@hadoop102 software"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" clickhouse\n")])])]),a("p",[s._v("将安装包上传到 "),a("code",[s._v("clickhouse")]),s._v(" 目录下，并将目录同步至 "),a("code",[s._v("hadoop103")]),s._v(" 、"),a("code",[s._v("hadoop104")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("laowang@hadoop102 software"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ xsync clickhouse\n")])])]),a("p",[s._v("分别在三台机子上安装这4个rpm文件")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("laowang@hadoop102 clickhouse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ivh *.rpm\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("laowang@hadoop103 clickhouse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ivh *.rpm\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("laowang@hadoop104 clickhouse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ivh *.rpm\n")])])]),a("p",[s._v("查看安装情况")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("laowang@hadoop102 clickhouse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -qa"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" clickhouse\n")])])]),a("p",[s._v("修改配置文件")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("laowang@hadoop102 clickhouse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/clickhouse-server/config.xml\n\n把 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("listen_host"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("::"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/listen_host"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 的注释打开，这样的话才能让ClickHouse被除本机以外的服务器访问\n")])])]),a("p",[s._v("分发配置文件")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("laowang@hadoop102 clickhouse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" xsync /etc/clickhouse-server/config.xml\n")])])]),a("p",[s._v("启动 "),a("code",[s._v("hadoop102")]),s._v(" 的 Server")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("laowang@hadoop102 clickhouse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start clickhouse-server\n")])])]),a("h1",{attrs:{id:"二、副本环境搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、副本环境搭建"}},[s._v("#")]),s._v(" 二、副本环境搭建")]),s._v(" "),a("p",[s._v("1、启动 zookeeper 集群")]),s._v(" "),a("p",[s._v("2、修改配置文件")]),s._v(" "),a("p",[s._v("3、同步配置文件")]),s._v(" "),a("h1",{attrs:{id:"三、集群环境搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、集群环境搭建"}},[s._v("#")]),s._v(" 三、集群环境搭建")])])}),[],!1,null,null,null);a.default=e.exports}}]);