(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{285:function(a,t,s){"use strict";s.r(t);var e=s(10),n=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("blockquote",[t("p",[a._v("注：")]),a._v(" "),t("p",[a._v("1、Kafka 3.x 以后的版本可以不依赖于Zookeeper部署。")]),a._v(" "),t("p",[a._v("2、本文档基于两个版本进行部署，Kafka 2.x 系列和 Kafka 3.x系列。")])]),a._v(" "),t("h1",{attrs:{id:"_1、环境准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、环境准备"}},[a._v("#")]),a._v(" 1、环境准备")]),a._v(" "),t("ul",[t("li",[a._v("你的环境中必须具备 "),t("code",[a._v("Java")]),a._v(" 环境和 "),t("code",[a._v("Zookeeper")]),a._v(" 环境")]),a._v(" "),t("li",[a._v("将压缩包上传到 "),t("code",[a._v("/opt/software/")])])]),a._v(" "),t("h1",{attrs:{id:"_2、解压文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、解压文件"}},[a._v("#")]),a._v(" 2、解压文件")]),a._v(" "),t("p",[a._v("将压缩包解压到 "),t("code",[a._v("/opt/module/")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("laowang@hadoop102 software"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -zxvf kafka_2.11-2.4.1.tgz -C /opt/module/\n")])])]),t("h1",{attrs:{id:"_3、修改配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、修改配置文件"}},[a._v("#")]),a._v(" 3、修改配置文件")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("laowang@hadoop102 kafka_2.11-2.4.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" config/\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("laowang@hadoop102 config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" server.properties\n")])])]),t("div",{staticClass:"language-properties extra-class"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#broker 的全局唯一编号，不能重复，只能是数字。")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("broker.id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("0")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#处理网络请求的线程数量")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("num.network.threads")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("3")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#用来处理磁盘 IO 的线程数量")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("num.io.threads")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("8")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#发送套接字的缓冲区大小")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("socket.send.buffer.bytes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("102400")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#接收套接字的缓冲区大小")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("socket.receive.buffer.bytes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("102400")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#请求套接字的缓冲区大小")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("socket.request.max.bytes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("104857600")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('#kafka 运行日志(数据)存放的路径，路径不需要提前创建，kafka 自动帮你创建，可以配置多个磁盘路径，路径与路径之间可以用"，"分隔')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("log.dirs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/opt/module/kafka/datas")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#topic 在当前 broker 上的分区个数")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("num.partitions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#用来恢复和清理 data 下数据的线程数量")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("num.recovery.threads.per.data.dir")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 每个 topic 创建时的副本数，默认是 1 个副本")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("offsets.topic.replication.factor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#segment 文件保留的最长时间，超时将被删除")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("log.retention.hours")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("168")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#每个 segment 文件的大小，默认最大 1G")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("log.segment.bytes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("1073741824")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 检查过期数据的时间，默认 5 分钟检查一次是否数据过期")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("log.retention.check.interval.ms")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("300000")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#配置连接 Zookeeper 集群地址（在 zk 根目录下创建/kafka，方便管理）")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("zookeeper.connect")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("hadoop102:2181,hadoop103:2181,hadoop104:2181/kafka")]),a._v("\n")])])]),t("h1",{attrs:{id:"_4、配置环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、配置环境变量"}},[a._v("#")]),a._v(" 4、配置环境变量")]),a._v(" "),t("h1",{attrs:{id:"_5、分发目录和环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、分发目录和环境变量"}},[a._v("#")]),a._v(" 5、分发目录和环境变量")]),a._v(" "),t("h1",{attrs:{id:"_6、集群启停脚本的编写"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6、集群启停脚本的编写"}},[a._v("#")]),a._v(" 6、集群启停脚本的编写")]),a._v(" "),t("h1",{attrs:{id:"_7、kafka-kraft-模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7、kafka-kraft-模式"}},[a._v("#")]),a._v(" 7、Kafka- Kraft 模式")]),a._v(" "),t("blockquote",[t("p",[a._v("Kafka- Kraft 模式即不依赖于Zookeeper部署Kafka集群")])])])}),[],!1,null,null,null);t.default=n.exports}}]);